{"ast":null,"code":"import _objectSpread from\"/Users/yourystancato/youtube-viral-clipper/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import api from'../services/api';import toast from'react-hot-toast';import{FiSearch,FiRefreshCw,FiTrash2,FiChevronLeft,FiChevronRight,FiGrid,FiList,FiX,FiChevronDown,FiChevronUp,FiPlay,FiClock,FiCheckCircle,FiXCircle,FiAlertCircle}from'react-icons/fi';import LoadingSpinner from'../components/LoadingSpinner';import Card,{CardBody,CardFooter}from'../components/ui/Card';import Button from'../components/ui/Button';import Input from'../components/ui/Input';import StatusIndicator from'../components/ui/StatusIndicator';import ProgressBar from'../components/ui/ProgressBar';import EmptyState from'../components/ui/EmptyState';import Badge from'../components/ui/Badge';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Jobs=()=>{const[jobs,setJobs]=useState([]);const[filteredJobs,setFilteredJobs]=useState([]);const[isLoading,setIsLoading]=useState(true);const[searchQuery,setSearchQuery]=useState('');const[statusFilter,setStatusFilter]=useState('all');const[viewMode,setViewMode]=useState('list');const[currentPage,setCurrentPage]=useState(1);const[expandedJobId,setExpandedJobId]=useState(null);const[jobLogs,setJobLogs]=useState({});const[sortBy,setSortBy]=useState('date');const[sortOrder,setSortOrder]=useState('desc');const itemsPerPage=10;useEffect(()=>{loadJobs();// Auto-refresh every 5 seconds\nconst interval=setInterval(()=>{loadJobs(false);},5000);return()=>clearInterval(interval);},[]);useEffect(()=>{filterAndSortJobs();},[searchQuery,statusFilter,jobs,sortBy,sortOrder]);const loadJobs=async function(){let showLoading=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(showLoading){setIsLoading(true);}try{const response=await api.listJobs({per_page:100});setJobs(response.jobs);}catch(error){console.error('Failed to load jobs:',error);if(showLoading){toast.error('Failed to load jobs');}}finally{if(showLoading){setIsLoading(false);}}};const filterAndSortJobs=()=>{let filtered=[...jobs];// Search filter\nif(searchQuery.trim()){const query=searchQuery.toLowerCase();filtered=filtered.filter(job=>{var _job$video_title,_job$video_url;return((_job$video_title=job.video_title)===null||_job$video_title===void 0?void 0:_job$video_title.toLowerCase().includes(query))||((_job$video_url=job.video_url)===null||_job$video_url===void 0?void 0:_job$video_url.toLowerCase().includes(query));});}// Status filter\nif(statusFilter!=='all'){if(statusFilter==='processing'){filtered=filtered.filter(j=>['downloading','transcribing','analyzing','slicing'].includes(j.status));}else{filtered=filtered.filter(job=>job.status===statusFilter);}}// Sort\nfiltered.sort((a,b)=>{let comparison=0;switch(sortBy){case'date':comparison=new Date(a.created_at).getTime()-new Date(b.created_at).getTime();break;case'status':comparison=a.status.localeCompare(b.status);break;case'clips':comparison=(a.clips_created||0)-(b.clips_created||0);break;}return sortOrder==='asc'?comparison:-comparison;});setFilteredJobs(filtered);setCurrentPage(1);// Reset to first page when filters change\n};const handleDeleteJob=async jobId=>{if(!window.confirm('Are you sure you want to delete this job and all its clips?')){return;}try{await api.deleteJob(jobId);toast.success('Job deleted successfully');loadJobs();}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to delete job');}};const handleRetryJob=async jobId=>{try{const job=jobs.find(j=>j.id===jobId);if(!job)return;await api.deleteJob(jobId);await api.createJob(job.video_url);toast.success('Job restarted!');loadJobs();}catch(error){var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to retry job');}};const handleCancelJob=async jobId=>{try{await api.cancelJob(jobId);toast.success('Job cancelled');loadJobs();}catch(error){var _error$response3,_error$response3$data;toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Failed to cancel job');}};const handleViewLogs=async jobId=>{if(expandedJobId===jobId){setExpandedJobId(null);return;}try{const logs=await api.getJobLogs(jobId);setJobLogs(_objectSpread(_objectSpread({},jobLogs),{},{[jobId]:JSON.stringify(logs,null,2)}));setExpandedJobId(jobId);}catch(error){var _error$response4,_error$response4$data;toast.error(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'Failed to get logs');}};const statusTabs=[{value:'all',label:'All',icon:FiList},{value:'completed',label:'Completed',icon:FiCheckCircle},{value:'processing',label:'Processing',icon:FiPlay},{value:'failed',label:'Failed',icon:FiXCircle},{value:'pending',label:'Pending',icon:FiClock}];// Pagination\nconst totalPages=Math.ceil(filteredJobs.length/itemsPerPage);const startIndex=(currentPage-1)*itemsPerPage;const endIndex=startIndex+itemsPerPage;const paginatedJobs=filteredJobs.slice(startIndex,endIndex);const getStatusCount=status=>{if(status==='all')return jobs.length;if(status==='processing'){return jobs.filter(j=>['downloading','transcribing','analyzing','slicing'].includes(j.status)).length;}return jobs.filter(j=>j.status===status).length;};const getStatusIcon=status=>{switch(status){case'completed':return/*#__PURE__*/_jsx(FiCheckCircle,{className:\"w-4 h-4\"});case'failed':return/*#__PURE__*/_jsx(FiXCircle,{className:\"w-4 h-4\"});case'pending':return/*#__PURE__*/_jsx(FiClock,{className:\"w-4 h-4\"});default:return/*#__PURE__*/_jsx(FiPlay,{className:\"w-4 h-4\"});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-neutral-900\",children:\"All Jobs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-neutral-600 mt-1\",children:\"View and manage all your video processing jobs\"})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>loadJobs(true),variant:\"outline\",icon:/*#__PURE__*/_jsx(FiRefreshCw,{}),children:\"Refresh\"})]}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsx(Input,{type:\"text\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),placeholder:\"Search jobs by title or URL...\",variant:\"search\",leftIcon:/*#__PURE__*/_jsx(FiSearch,{className:\"w-5 h-5\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setViewMode('grid'),variant:viewMode==='grid'?'primary':'outline',size:\"sm\",icon:/*#__PURE__*/_jsx(FiGrid,{}),children:\"Grid\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setViewMode('list'),variant:viewMode==='list'?'primary':'outline',size:\"sm\",icon:/*#__PURE__*/_jsx(FiList,{}),children:\"List\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2 overflow-x-auto pb-2 w-full sm:w-auto\",children:statusTabs.map(tab=>{const count=getStatusCount(tab.value);const Icon=tab.icon;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setStatusFilter(tab.value),className:\"\\n                      flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap\\n                      transition-colors duration-base\\n                      \".concat(statusFilter===tab.value?'bg-primary-600 text-white':'bg-neutral-100 text-neutral-700 hover:bg-neutral-200',\"\\n                    \"),children:[/*#__PURE__*/_jsx(Icon,{className:\"w-4 h-4\"}),tab.label,\" (\",count,\")\"]},tab.value);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-neutral-600\",children:\"Sort by:\"}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"px-3 py-1.5 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"date\",children:\"Date\"}),/*#__PURE__*/_jsx(\"option\",{value:\"status\",children:\"Status\"}),/*#__PURE__*/_jsx(\"option\",{value:\"clips\",children:\"Clips\"})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>setSortOrder(sortOrder==='asc'?'desc':'asc'),variant:\"outline\",size:\"sm\",icon:sortOrder==='asc'?/*#__PURE__*/_jsx(FiChevronUp,{}):/*#__PURE__*/_jsx(FiChevronDown,{})})]})]})]})}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center py-12\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})}):paginatedJobs.length===0?/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(EmptyState,{icon:/*#__PURE__*/_jsx(FiList,{className:\"w-full h-full\"}),title:searchQuery||statusFilter!=='all'?\"No jobs found\":\"No jobs yet\",description:searchQuery||statusFilter!=='all'?\"Try adjusting your filters\":\"Create a job from the dashboard to get started!\",action:!searchQuery&&statusFilter==='all'?{label:\"Go to Dashboard\",onClick:()=>window.location.href='/dashboard'}:undefined})}):viewMode==='grid'?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:paginatedJobs.map(job=>/*#__PURE__*/_jsxs(Card,{hover:true,children:[/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-neutral-900 truncate mb-2\",children:job.video_title||job.video_url}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 flex-wrap\",children:[/*#__PURE__*/_jsx(StatusIndicator,{status:job.status}),/*#__PURE__*/_jsxs(Badge,{variant:\"neutral\",size:\"sm\",children:[job.clips_created||0,\" clips\"]})]})]})}),job.progress>0&&job.status!=='completed'&&/*#__PURE__*/_jsx(ProgressBar,{value:job.progress,variant:job.status==='failed'?'error':['downloading','transcribing','analyzing','slicing'].includes(job.status)?'primary':'warning',label:job.current_step,showLabel:true,size:\"sm\"}),job.error_message&&/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-error-50 border border-error-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(FiAlertCircle,{className:\"w-4 h-4 text-error-600 mt-0.5 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-error-600 line-clamp-2\",children:job.error_message})]})}),expandedJobId===job.id&&jobLogs[job.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-neutral-50 border border-neutral-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-medium text-neutral-700 mb-2\",children:\"Job Details:\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-xs text-neutral-600 overflow-x-auto whitespace-pre-wrap break-words font-mono max-h-32 overflow-y-auto\",children:jobLogs[job.id]})]})]})}),/*#__PURE__*/_jsx(CardFooter,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between w-full\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-neutral-500\",children:new Date(job.created_at).toLocaleString()}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>handleViewLogs(job.id),variant:\"ghost\",size:\"sm\",icon:expandedJobId===job.id?/*#__PURE__*/_jsx(FiChevronUp,{}):/*#__PURE__*/_jsx(FiChevronDown,{}),children:expandedJobId===job.id?'Hide':'Details'}),job.status==='failed'&&/*#__PURE__*/_jsx(Button,{onClick:()=>handleRetryJob(job.id),variant:\"outline\",size:\"sm\",icon:/*#__PURE__*/_jsx(FiRefreshCw,{}),children:\"Retry\"}),['downloading','transcribing','analyzing','slicing'].includes(job.status)&&/*#__PURE__*/_jsx(Button,{onClick:()=>handleCancelJob(job.id),variant:\"outline\",size:\"sm\",icon:/*#__PURE__*/_jsx(FiX,{}),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleDeleteJob(job.id),variant:\"ghost\",size:\"sm\",icon:/*#__PURE__*/_jsx(FiTrash2,{}),className:\"text-error-600 hover:text-error-700 hover:bg-error-50\"})]})]})})]},job.id))}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:paginatedJobs.map(job=>/*#__PURE__*/_jsx(Card,{hover:true,children:/*#__PURE__*/_jsx(CardBody,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-start gap-4 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-neutral-900 truncate mb-2\",children:job.video_title||job.video_url}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 flex-wrap\",children:[/*#__PURE__*/_jsx(StatusIndicator,{status:job.status}),/*#__PURE__*/_jsxs(Badge,{variant:\"neutral\",size:\"sm\",children:[job.clips_created||0,\" clips\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-neutral-500\",children:new Date(job.created_at).toLocaleString()})]})]})}),job.progress>0&&job.status!=='completed'&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(ProgressBar,{value:job.progress,variant:job.status==='failed'?'error':['downloading','transcribing','analyzing','slicing'].includes(job.status)?'primary':'warning',label:job.current_step,showLabel:true})}),job.error_message&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 p-3 bg-error-50 border border-error-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(FiAlertCircle,{className:\"w-4 h-4 text-error-600 mt-0.5 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-error-600 line-clamp-2\",children:job.error_message})]})}),expandedJobId===job.id&&jobLogs[job.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-3 bg-neutral-50 border border-neutral-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-medium text-neutral-700 mb-2\",children:\"Job Details:\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-xs text-neutral-600 overflow-x-auto whitespace-pre-wrap break-words font-mono max-h-32 overflow-y-auto\",children:jobLogs[job.id]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 flex flex-col gap-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>handleViewLogs(job.id),variant:\"ghost\",size:\"sm\",icon:expandedJobId===job.id?/*#__PURE__*/_jsx(FiChevronUp,{}):/*#__PURE__*/_jsx(FiChevronDown,{}),children:expandedJobId===job.id?'Hide':'Details'}),job.status==='failed'&&/*#__PURE__*/_jsx(Button,{onClick:()=>handleRetryJob(job.id),variant:\"outline\",size:\"sm\",icon:/*#__PURE__*/_jsx(FiRefreshCw,{}),children:\"Retry\"}),['downloading','transcribing','analyzing','slicing'].includes(job.status)&&/*#__PURE__*/_jsx(Button,{onClick:()=>handleCancelJob(job.id),variant:\"outline\",size:\"sm\",icon:/*#__PURE__*/_jsx(FiX,{}),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleDeleteJob(job.id),variant:\"ghost\",size:\"sm\",icon:/*#__PURE__*/_jsx(FiTrash2,{}),className:\"text-error-600 hover:text-error-700 hover:bg-error-50\"})]})})]})})},job.id))}),totalPages>1&&/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row items-center justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-neutral-600\",children:[\"Showing \",startIndex+1,\" to \",Math.min(endIndex,filteredJobs.length),\" of \",filteredJobs.length,\" jobs\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setCurrentPage(prev=>Math.max(1,prev-1)),disabled:currentPage===1,variant:\"outline\",size:\"sm\",icon:/*#__PURE__*/_jsx(FiChevronLeft,{}),children:\"Previous\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-1\",children:Array.from({length:Math.min(totalPages,10)},(_,i)=>{let page;if(totalPages<=10){page=i+1;}else if(currentPage<=5){page=i+1;}else if(currentPage>=totalPages-4){page=totalPages-9+i;}else{page=currentPage-4+i;}return/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(page),className:\"\\n                        w-8 h-8 rounded-lg text-sm font-medium\\n                        transition-colors duration-base\\n                        \".concat(currentPage===page?'bg-primary-600 text-white':'bg-neutral-100 text-neutral-700 hover:bg-neutral-200',\"\\n                      \"),children:page},page);})}),/*#__PURE__*/_jsx(Button,{onClick:()=>setCurrentPage(prev=>Math.min(totalPages,prev+1)),disabled:currentPage===totalPages,variant:\"outline\",size:\"sm\",icon:/*#__PURE__*/_jsx(FiChevronRight,{}),iconPosition:\"right\",children:\"Next\"})]})]})})]});};export default Jobs;","map":{"version":3,"names":["React","useState","useEffect","api","toast","FiSearch","FiRefreshCw","FiTrash2","FiChevronLeft","FiChevronRight","FiGrid","FiList","FiX","FiChevronDown","FiChevronUp","FiPlay","FiClock","FiCheckCircle","FiXCircle","FiAlertCircle","LoadingSpinner","Card","CardBody","CardFooter","Button","Input","StatusIndicator","ProgressBar","EmptyState","Badge","jsx","_jsx","jsxs","_jsxs","Jobs","jobs","setJobs","filteredJobs","setFilteredJobs","isLoading","setIsLoading","searchQuery","setSearchQuery","statusFilter","setStatusFilter","viewMode","setViewMode","currentPage","setCurrentPage","expandedJobId","setExpandedJobId","jobLogs","setJobLogs","sortBy","setSortBy","sortOrder","setSortOrder","itemsPerPage","loadJobs","interval","setInterval","clearInterval","filterAndSortJobs","showLoading","arguments","length","undefined","response","listJobs","per_page","error","console","filtered","trim","query","toLowerCase","filter","job","_job$video_title","_job$video_url","video_title","includes","video_url","j","status","sort","a","b","comparison","Date","created_at","getTime","localeCompare","clips_created","handleDeleteJob","jobId","window","confirm","deleteJob","success","_error$response","_error$response$data","data","handleRetryJob","find","id","createJob","_error$response2","_error$response2$data","handleCancelJob","cancelJob","_error$response3","_error$response3$data","handleViewLogs","logs","getJobLogs","_objectSpread","JSON","stringify","_error$response4","_error$response4$data","statusTabs","value","label","icon","totalPages","Math","ceil","startIndex","endIndex","paginatedJobs","slice","getStatusCount","getStatusIcon","className","children","onClick","variant","type","onChange","e","target","placeholder","leftIcon","size","map","tab","count","Icon","concat","title","description","action","location","href","hover","progress","current_step","showLabel","error_message","toLocaleString","min","prev","max","disabled","Array","from","_","i","page","iconPosition"],"sources":["/Users/yourystancato/youtube-viral-clipper/frontend/src/pages/Jobs.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../services/api';\nimport { Job } from '../types';\nimport toast from 'react-hot-toast';\nimport { \n  FiSearch, \n  FiRefreshCw, \n  FiTrash2, \n  FiChevronLeft, \n  FiChevronRight, \n  FiGrid, \n  FiList,\n  FiX,\n  FiChevronDown,\n  FiChevronUp,\n  FiPlay,\n  FiClock,\n  FiCheckCircle,\n  FiXCircle,\n  FiAlertCircle\n} from 'react-icons/fi';\nimport LoadingSpinner from '../components/LoadingSpinner';\nimport Card, { CardHeader, CardBody, CardFooter } from '../components/ui/Card';\nimport Button from '../components/ui/Button';\nimport Input from '../components/ui/Input';\nimport StatusIndicator from '../components/ui/StatusIndicator';\nimport ProgressBar from '../components/ui/ProgressBar';\nimport EmptyState from '../components/ui/EmptyState';\nimport Badge from '../components/ui/Badge';\n\nconst Jobs: React.FC = () => {\n  const [jobs, setJobs] = useState<Job[]>([]);\n  const [filteredJobs, setFilteredJobs] = useState<Job[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('list');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [expandedJobId, setExpandedJobId] = useState<number | null>(null);\n  const [jobLogs, setJobLogs] = useState<{ [key: number]: string }>({});\n  const [sortBy, setSortBy] = useState<'date' | 'status' | 'clips'>('date');\n  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('desc');\n  const itemsPerPage = 10;\n\n  useEffect(() => {\n    loadJobs();\n    // Auto-refresh every 5 seconds\n    const interval = setInterval(() => {\n      loadJobs(false);\n    }, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  useEffect(() => {\n    filterAndSortJobs();\n  }, [searchQuery, statusFilter, jobs, sortBy, sortOrder]);\n\n  const loadJobs = async (showLoading = true) => {\n    if (showLoading) {\n      setIsLoading(true);\n    }\n    try {\n      const response = await api.listJobs({ per_page: 100 });\n      setJobs(response.jobs);\n    } catch (error) {\n      console.error('Failed to load jobs:', error);\n      if (showLoading) {\n        toast.error('Failed to load jobs');\n      }\n    } finally {\n      if (showLoading) {\n        setIsLoading(false);\n      }\n    }\n  };\n\n  const filterAndSortJobs = () => {\n    let filtered = [...jobs];\n\n    // Search filter\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(\n        (job) =>\n          job.video_title?.toLowerCase().includes(query) ||\n          job.video_url?.toLowerCase().includes(query)\n      );\n    }\n\n    // Status filter\n    if (statusFilter !== 'all') {\n      if (statusFilter === 'processing') {\n        filtered = filtered.filter(j => \n          ['downloading', 'transcribing', 'analyzing', 'slicing'].includes(j.status)\n        );\n      } else {\n        filtered = filtered.filter((job) => job.status === statusFilter);\n      }\n    }\n\n    // Sort\n    filtered.sort((a, b) => {\n      let comparison = 0;\n      \n      switch (sortBy) {\n        case 'date':\n          comparison = new Date(a.created_at).getTime() - new Date(b.created_at).getTime();\n          break;\n        case 'status':\n          comparison = a.status.localeCompare(b.status);\n          break;\n        case 'clips':\n          comparison = (a.clips_created || 0) - (b.clips_created || 0);\n          break;\n      }\n      \n      return sortOrder === 'asc' ? comparison : -comparison;\n    });\n\n    setFilteredJobs(filtered);\n    setCurrentPage(1); // Reset to first page when filters change\n  };\n\n  const handleDeleteJob = async (jobId: number) => {\n    if (!window.confirm('Are you sure you want to delete this job and all its clips?')) {\n      return;\n    }\n\n    try {\n      await api.deleteJob(jobId);\n      toast.success('Job deleted successfully');\n      loadJobs();\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || 'Failed to delete job');\n    }\n  };\n\n  const handleRetryJob = async (jobId: number) => {\n    try {\n      const job = jobs.find(j => j.id === jobId);\n      if (!job) return;\n      \n      await api.deleteJob(jobId);\n      await api.createJob(job.video_url);\n      toast.success('Job restarted!');\n      loadJobs();\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || 'Failed to retry job');\n    }\n  };\n\n  const handleCancelJob = async (jobId: number) => {\n    try {\n      await api.cancelJob(jobId);\n      toast.success('Job cancelled');\n      loadJobs();\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || 'Failed to cancel job');\n    }\n  };\n\n  const handleViewLogs = async (jobId: number) => {\n    if (expandedJobId === jobId) {\n      setExpandedJobId(null);\n      return;\n    }\n\n    try {\n      const logs = await api.getJobLogs(jobId);\n      setJobLogs({ ...jobLogs, [jobId]: JSON.stringify(logs, null, 2) });\n      setExpandedJobId(jobId);\n    } catch (error: any) {\n      toast.error(error.response?.data?.error || 'Failed to get logs');\n    }\n  };\n\n  const statusTabs = [\n    { value: 'all', label: 'All', icon: FiList },\n    { value: 'completed', label: 'Completed', icon: FiCheckCircle },\n    { value: 'processing', label: 'Processing', icon: FiPlay },\n    { value: 'failed', label: 'Failed', icon: FiXCircle },\n    { value: 'pending', label: 'Pending', icon: FiClock },\n  ];\n\n  // Pagination\n  const totalPages = Math.ceil(filteredJobs.length / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const paginatedJobs = filteredJobs.slice(startIndex, endIndex);\n\n  const getStatusCount = (status: string) => {\n    if (status === 'all') return jobs.length;\n    if (status === 'processing') {\n      return jobs.filter(j => ['downloading', 'transcribing', 'analyzing', 'slicing'].includes(j.status)).length;\n    }\n    return jobs.filter(j => j.status === status).length;\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'completed':\n        return <FiCheckCircle className=\"w-4 h-4\" />;\n      case 'failed':\n        return <FiXCircle className=\"w-4 h-4\" />;\n      case 'pending':\n        return <FiClock className=\"w-4 h-4\" />;\n      default:\n        return <FiPlay className=\"w-4 h-4\" />;\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-neutral-900\">All Jobs</h1>\n          <p className=\"text-neutral-600 mt-1\">View and manage all your video processing jobs</p>\n        </div>\n        <Button\n          onClick={() => loadJobs(true)}\n          variant=\"outline\"\n          icon={<FiRefreshCw />}\n        >\n          Refresh\n        </Button>\n      </div>\n\n      {/* Filters and Controls */}\n      <Card>\n        <div className=\"space-y-4\">\n          <div className=\"flex flex-col sm:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <Input\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                placeholder=\"Search jobs by title or URL...\"\n                variant=\"search\"\n                leftIcon={<FiSearch className=\"w-5 h-5\" />}\n              />\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Button\n                onClick={() => setViewMode('grid')}\n                variant={viewMode === 'grid' ? 'primary' : 'outline'}\n                size=\"sm\"\n                icon={<FiGrid />}\n              >\n                Grid\n              </Button>\n              <Button\n                onClick={() => setViewMode('list')}\n                variant={viewMode === 'list' ? 'primary' : 'outline'}\n                size=\"sm\"\n                icon={<FiList />}\n              >\n                List\n              </Button>\n            </div>\n          </div>\n\n          {/* Status Tabs and Sort */}\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-2 overflow-x-auto pb-2 w-full sm:w-auto\">\n              {statusTabs.map((tab) => {\n                const count = getStatusCount(tab.value);\n                const Icon = tab.icon;\n                return (\n                  <button\n                    key={tab.value}\n                    onClick={() => setStatusFilter(tab.value)}\n                    className={`\n                      flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap\n                      transition-colors duration-base\n                      ${\n                        statusFilter === tab.value\n                          ? 'bg-primary-600 text-white'\n                          : 'bg-neutral-100 text-neutral-700 hover:bg-neutral-200'\n                      }\n                    `}\n                  >\n                    <Icon className=\"w-4 h-4\" />\n                    {tab.label} ({count})\n                  </button>\n                );\n              })}\n            </div>\n\n            {/* Sort Controls */}\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm text-neutral-600\">Sort by:</span>\n              <select\n                value={sortBy}\n                onChange={(e) => setSortBy(e.target.value as 'date' | 'status' | 'clips')}\n                className=\"px-3 py-1.5 border border-neutral-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500\"\n              >\n                <option value=\"date\">Date</option>\n                <option value=\"status\">Status</option>\n                <option value=\"clips\">Clips</option>\n              </select>\n              <Button\n                onClick={() => setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')}\n                variant=\"outline\"\n                size=\"sm\"\n                icon={sortOrder === 'asc' ? <FiChevronUp /> : <FiChevronDown />}\n              />\n            </div>\n          </div>\n        </div>\n      </Card>\n\n      {/* Jobs Display */}\n      {isLoading ? (\n        <div className=\"flex justify-center py-12\">\n          <LoadingSpinner />\n        </div>\n      ) : paginatedJobs.length === 0 ? (\n        <Card>\n          <EmptyState\n            icon={<FiList className=\"w-full h-full\" />}\n            title={searchQuery || statusFilter !== 'all' ? \"No jobs found\" : \"No jobs yet\"}\n            description={searchQuery || statusFilter !== 'all' ? \"Try adjusting your filters\" : \"Create a job from the dashboard to get started!\"}\n            action={!searchQuery && statusFilter === 'all' ? {\n              label: \"Go to Dashboard\",\n              onClick: () => window.location.href = '/dashboard'\n            } : undefined}\n          />\n        </Card>\n      ) : viewMode === 'grid' ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {paginatedJobs.map((job) => (\n            <Card key={job.id} hover>\n              <CardBody>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"font-semibold text-neutral-900 truncate mb-2\">\n                        {job.video_title || job.video_url}\n                      </h3>\n                      <div className=\"flex items-center gap-2 flex-wrap\">\n                        <StatusIndicator status={job.status} />\n                        <Badge variant=\"neutral\" size=\"sm\">\n                          {job.clips_created || 0} clips\n                        </Badge>\n                      </div>\n                    </div>\n                  </div>\n\n                  {job.progress > 0 && job.status !== 'completed' && (\n                    <ProgressBar\n                      value={job.progress}\n                      variant={\n                        job.status === 'failed' ? 'error' :\n                        ['downloading', 'transcribing', 'analyzing', 'slicing'].includes(job.status) ? 'primary' :\n                        'warning'\n                      }\n                      label={job.current_step}\n                      showLabel\n                      size=\"sm\"\n                    />\n                  )}\n\n                  {job.error_message && (\n                    <div className=\"p-3 bg-error-50 border border-error-200 rounded-lg\">\n                      <div className=\"flex items-start gap-2\">\n                        <FiAlertCircle className=\"w-4 h-4 text-error-600 mt-0.5 flex-shrink-0\" />\n                        <p className=\"text-sm text-error-600 line-clamp-2\">\n                          {job.error_message}\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  {expandedJobId === job.id && jobLogs[job.id] && (\n                    <div className=\"p-3 bg-neutral-50 border border-neutral-200 rounded-lg\">\n                      <p className=\"text-xs font-medium text-neutral-700 mb-2\">Job Details:</p>\n                      <pre className=\"text-xs text-neutral-600 overflow-x-auto whitespace-pre-wrap break-words font-mono max-h-32 overflow-y-auto\">\n                        {jobLogs[job.id]}\n                      </pre>\n                    </div>\n                  )}\n                </div>\n              </CardBody>\n              <CardFooter>\n                <div className=\"flex items-center justify-between w-full\">\n                  <span className=\"text-xs text-neutral-500\">\n                    {new Date(job.created_at).toLocaleString()}\n                  </span>\n                  <div className=\"flex items-center gap-2\">\n                    <Button\n                      onClick={() => handleViewLogs(job.id)}\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      icon={expandedJobId === job.id ? <FiChevronUp /> : <FiChevronDown />}\n                    >\n                      {expandedJobId === job.id ? 'Hide' : 'Details'}\n                    </Button>\n                    {job.status === 'failed' && (\n                      <Button\n                        onClick={() => handleRetryJob(job.id)}\n                        variant=\"outline\"\n                        size=\"sm\"\n                        icon={<FiRefreshCw />}\n                      >\n                        Retry\n                      </Button>\n                    )}\n                    {['downloading', 'transcribing', 'analyzing', 'slicing'].includes(job.status) && (\n                      <Button\n                        onClick={() => handleCancelJob(job.id)}\n                        variant=\"outline\"\n                        size=\"sm\"\n                        icon={<FiX />}\n                      >\n                        Cancel\n                      </Button>\n                    )}\n                    <Button\n                      onClick={() => handleDeleteJob(job.id)}\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      icon={<FiTrash2 />}\n                      className=\"text-error-600 hover:text-error-700 hover:bg-error-50\"\n                    />\n                  </div>\n                </div>\n              </CardFooter>\n            </Card>\n          ))}\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {paginatedJobs.map((job) => (\n            <Card key={job.id} hover>\n              <CardBody>\n                <div className=\"flex items-start justify-between gap-4\">\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-start gap-4 mb-3\">\n                      <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"font-semibold text-neutral-900 truncate mb-2\">\n                          {job.video_title || job.video_url}\n                        </h3>\n                        <div className=\"flex items-center gap-3 flex-wrap\">\n                          <StatusIndicator status={job.status} />\n                          <Badge variant=\"neutral\" size=\"sm\">\n                            {job.clips_created || 0} clips\n                          </Badge>\n                          <span className=\"text-sm text-neutral-500\">\n                            {new Date(job.created_at).toLocaleString()}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    {job.progress > 0 && job.status !== 'completed' && (\n                      <div className=\"mt-3\">\n                        <ProgressBar\n                          value={job.progress}\n                          variant={\n                            job.status === 'failed' ? 'error' :\n                            ['downloading', 'transcribing', 'analyzing', 'slicing'].includes(job.status) ? 'primary' :\n                            'warning'\n                          }\n                          label={job.current_step}\n                          showLabel\n                        />\n                      </div>\n                    )}\n\n                    {job.error_message && (\n                      <div className=\"mt-3 p-3 bg-error-50 border border-error-200 rounded-lg\">\n                        <div className=\"flex items-start gap-2\">\n                          <FiAlertCircle className=\"w-4 h-4 text-error-600 mt-0.5 flex-shrink-0\" />\n                          <p className=\"text-sm text-error-600 line-clamp-2\">\n                            {job.error_message}\n                          </p>\n                        </div>\n                      </div>\n                    )}\n\n                    {expandedJobId === job.id && jobLogs[job.id] && (\n                      <div className=\"mt-3 p-3 bg-neutral-50 border border-neutral-200 rounded-lg\">\n                        <p className=\"text-xs font-medium text-neutral-700 mb-2\">Job Details:</p>\n                        <pre className=\"text-xs text-neutral-600 overflow-x-auto whitespace-pre-wrap break-words font-mono max-h-32 overflow-y-auto\">\n                          {jobLogs[job.id]}\n                        </pre>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"flex-shrink-0 flex flex-col gap-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <Button\n                        onClick={() => handleViewLogs(job.id)}\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        icon={expandedJobId === job.id ? <FiChevronUp /> : <FiChevronDown />}\n                      >\n                        {expandedJobId === job.id ? 'Hide' : 'Details'}\n                      </Button>\n                      {job.status === 'failed' && (\n                        <Button\n                          onClick={() => handleRetryJob(job.id)}\n                          variant=\"outline\"\n                          size=\"sm\"\n                          icon={<FiRefreshCw />}\n                        >\n                          Retry\n                        </Button>\n                      )}\n                      {['downloading', 'transcribing', 'analyzing', 'slicing'].includes(job.status) && (\n                        <Button\n                          onClick={() => handleCancelJob(job.id)}\n                          variant=\"outline\"\n                          size=\"sm\"\n                          icon={<FiX />}\n                        >\n                          Cancel\n                        </Button>\n                      )}\n                      <Button\n                        onClick={() => handleDeleteJob(job.id)}\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        icon={<FiTrash2 />}\n                        className=\"text-error-600 hover:text-error-700 hover:bg-error-50\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              </CardBody>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      {/* Pagination */}\n      {totalPages > 1 && (\n        <Card>\n          <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n            <div className=\"text-sm text-neutral-600\">\n              Showing {startIndex + 1} to {Math.min(endIndex, filteredJobs.length)} of {filteredJobs.length} jobs\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Button\n                onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\n                disabled={currentPage === 1}\n                variant=\"outline\"\n                size=\"sm\"\n                icon={<FiChevronLeft />}\n              >\n                Previous\n              </Button>\n              <div className=\"flex items-center gap-1\">\n                {Array.from({ length: Math.min(totalPages, 10) }, (_, i) => {\n                  let page;\n                  if (totalPages <= 10) {\n                    page = i + 1;\n                  } else if (currentPage <= 5) {\n                    page = i + 1;\n                  } else if (currentPage >= totalPages - 4) {\n                    page = totalPages - 9 + i;\n                  } else {\n                    page = currentPage - 4 + i;\n                  }\n                  return (\n                    <button\n                      key={page}\n                      onClick={() => setCurrentPage(page)}\n                      className={`\n                        w-8 h-8 rounded-lg text-sm font-medium\n                        transition-colors duration-base\n                        ${\n                          currentPage === page\n                            ? 'bg-primary-600 text-white'\n                            : 'bg-neutral-100 text-neutral-700 hover:bg-neutral-200'\n                        }\n                      `}\n                    >\n                      {page}\n                    </button>\n                  );\n                })}\n              </div>\n              <Button\n                onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\n                disabled={currentPage === totalPages}\n                variant=\"outline\"\n                size=\"sm\"\n                icon={<FiChevronRight />}\n                iconPosition=\"right\"\n              >\n                Next\n              </Button>\n            </div>\n          </div>\n        </Card>\n      )}\n    </div>\n  );\n};\n\nexport default Jobs;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}