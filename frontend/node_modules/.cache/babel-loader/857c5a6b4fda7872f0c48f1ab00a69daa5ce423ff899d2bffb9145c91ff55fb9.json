{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import api from'../services/api';import toast from'react-hot-toast';import LoadingSpinner from'../components/LoadingSpinner';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const YouTubeCallback=()=>{const[searchParams]=useSearchParams();const navigate=useNavigate();const[status,setStatus]=useState('processing');const[message,setMessage]=useState('Processing YouTube authorization...');useEffect(()=>{const handleCallback=async()=>{const code=searchParams.get('code');const state=searchParams.get('state');const error=searchParams.get('error');if(error){setStatus('error');setMessage(\"Authorization failed: \".concat(error));toast.error('YouTube authorization failed');setTimeout(()=>navigate('/settings'),3000);return;}if(!code){setStatus('error');setMessage('No authorization code received');toast.error('Invalid authorization response');setTimeout(()=>navigate('/settings'),3000);return;}try{const redirectUri=sessionStorage.getItem('youtube_oauth_redirect')||\"\".concat(window.location.origin,\"/youtube/callback\");sessionStorage.removeItem('youtube_oauth_redirect');const result=await api.handleYouTubeCallback(code,state||'',redirectUri);setStatus('success');setMessage('YouTube account connected successfully!');toast.success('YouTube account connected!');setTimeout(()=>navigate('/settings'),2000);}catch(error){var _error$response,_error$response$data,_error$response2,_error$response2$data;setStatus('error');const errorMsg=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to connect account';setMessage(errorMsg);toast.error(errorMsg);setTimeout(()=>navigate('/settings'),3000);}};handleCallback();},[searchParams,navigate]);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full bg-white shadow-lg rounded-lg p-8 text-center\",children:[status==='processing'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:message})]}),status==='success'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-green-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:\"Success!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Redirecting to settings...\"})]}),status==='error'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-8 h-8 text-red-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Redirecting to settings...\"})]})]})});};export default YouTubeCallback;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useSearchParams","api","toast","LoadingSpinner","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","YouTubeCallback","searchParams","navigate","status","setStatus","message","setMessage","handleCallback","code","get","state","error","concat","setTimeout","redirectUri","sessionStorage","getItem","window","location","origin","removeItem","result","handleYouTubeCallback","success","_error$response","_error$response$data","_error$response2","_error$response2$data","errorMsg","response","data","className","children","size","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d"],"sources":["/Users/yourystancato/youtube-viral-clipper/frontend/src/pages/YouTubeCallback.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport api from '../services/api';\nimport toast from 'react-hot-toast';\nimport LoadingSpinner from '../components/LoadingSpinner';\n\nconst YouTubeCallback: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const [status, setStatus] = useState<'processing' | 'success' | 'error'>('processing');\n  const [message, setMessage] = useState('Processing YouTube authorization...');\n\n  useEffect(() => {\n    const handleCallback = async () => {\n      const code = searchParams.get('code');\n      const state = searchParams.get('state');\n      const error = searchParams.get('error');\n\n      if (error) {\n        setStatus('error');\n        setMessage(`Authorization failed: ${error}`);\n        toast.error('YouTube authorization failed');\n        setTimeout(() => navigate('/settings'), 3000);\n        return;\n      }\n\n      if (!code) {\n        setStatus('error');\n        setMessage('No authorization code received');\n        toast.error('Invalid authorization response');\n        setTimeout(() => navigate('/settings'), 3000);\n        return;\n      }\n\n      try {\n        const redirectUri = sessionStorage.getItem('youtube_oauth_redirect') || `${window.location.origin}/youtube/callback`;\n        sessionStorage.removeItem('youtube_oauth_redirect');\n\n        const result = await api.handleYouTubeCallback(code, state || '', redirectUri);\n        \n        setStatus('success');\n        setMessage('YouTube account connected successfully!');\n        toast.success('YouTube account connected!');\n        \n        setTimeout(() => navigate('/settings'), 2000);\n      } catch (error: any) {\n        setStatus('error');\n        const errorMsg = error.response?.data?.error || error.response?.data?.message || 'Failed to connect account';\n        setMessage(errorMsg);\n        toast.error(errorMsg);\n        \n        setTimeout(() => navigate('/settings'), 3000);\n      }\n    };\n\n    handleCallback();\n  }, [searchParams, navigate]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n      <div className=\"max-w-md w-full bg-white shadow-lg rounded-lg p-8 text-center\">\n        {status === 'processing' && (\n          <>\n            <LoadingSpinner size=\"lg\" />\n            <p className=\"mt-4 text-gray-600\">{message}</p>\n          </>\n        )}\n        \n        {status === 'success' && (\n          <>\n            <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n            </div>\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Success!</h2>\n            <p className=\"text-gray-600\">{message}</p>\n            <p className=\"text-sm text-gray-500 mt-2\">Redirecting to settings...</p>\n          </>\n        )}\n        \n        {status === 'error' && (\n          <>\n            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg className=\"w-8 h-8 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </div>\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Error</h2>\n            <p className=\"text-gray-600\">{message}</p>\n            <p className=\"text-sm text-gray-500 mt-2\">Redirecting to settings...</p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default YouTubeCallback;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}