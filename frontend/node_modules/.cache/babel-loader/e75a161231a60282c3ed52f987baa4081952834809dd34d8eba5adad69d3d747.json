{"ast":null,"code":"import axios from'axios';const API_URL=process.env.REACT_APP_API_URL||'http://localhost:5001';class APIClient{constructor(){this.client=void 0;this.client=axios.create({baseURL:\"\".concat(API_URL,\"/api\"),headers:{'Content-Type':'application/json'}});// Add auth token to requests\nthis.client.interceptors.request.use(config=>{const token=localStorage.getItem('access_token');if(token&&config.headers){config.headers.Authorization=\"Bearer \".concat(token);}return config;});// Handle token refresh on 401\nthis.client.interceptors.response.use(response=>response,async error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){// Token expired, clear and redirect to login\nlocalStorage.removeItem('access_token');window.location.href='/login';}return Promise.reject(error);});}// Auth endpoints\nasync register(data){const response=await this.client.post('/auth/register',data);return response.data;}async login(credentials){const response=await this.client.post('/auth/login',credentials);return response.data;}async getCurrentUser(){const response=await this.client.get('/auth/me');return response.data;}async logout(){await this.client.post('/auth/logout');}// Jobs endpoints\nasync listJobs(params){const response=await this.client.get('/jobs',{params});return response.data;}async getJob(id){const response=await this.client.get(\"/jobs/\".concat(id));return response.data;}async createJob(video_url){const response=await this.client.post('/jobs',{video_url});return response.data;}async cancelJob(id){const response=await this.client.post(\"/jobs/\".concat(id,\"/cancel\"));return response.data;}async getJobLogs(id){const response=await this.client.get(\"/jobs/\".concat(id,\"/logs\"));return response.data;}async deleteJob(id){const response=await this.client.delete(\"/jobs/\".concat(id));return response.data;}// Clips endpoints\nasync listClips(params){const response=await this.client.get('/clips',{params});return response.data;}async getClip(id){const response=await this.client.get(\"/clips/\".concat(id));return response.data;}getDownloadUrl(id){return\"\".concat(API_URL,\"/api/clips/\").concat(id,\"/download\");}getThumbnailUrl(id){return\"\".concat(API_URL,\"/api/clips/\").concat(id,\"/thumbnail\");}async uploadClipToYouTube(clipId,options){const response=await this.client.post(\"/youtube/clips/\".concat(clipId,\"/upload\"),options||{});return response.data;}async deleteClip(id){const response=await this.client.delete(\"/clips/\".concat(id));return response.data;}// Settings endpoints\nasync getSettings(){const response=await this.client.get('/settings');return response.data;}async updateSettings(settings){const response=await this.client.put('/settings',settings);return response.data;}// YouTube accounts endpoints\nasync listYouTubeAccounts(){const response=await this.client.get('/youtube/accounts');return response.data;}async getYouTubeAuthUrl(redirectUri){const params=redirectUri?{redirect_uri:redirectUri}:{};const response=await this.client.get('/youtube/auth/url',{params});return response.data;}async handleYouTubeCallback(code,state,redirectUri){const response=await this.client.post('/youtube/auth/callback',{code,state,redirect_uri:redirectUri});return response.data;}async deleteYouTubeAccount(id){const response=await this.client.delete(\"/youtube/accounts/\".concat(id));return response.data;}}export const api=new APIClient();export default api;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","APIClient","constructor","client","create","baseURL","concat","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","_error$response","status","removeItem","window","location","href","Promise","reject","register","data","post","login","credentials","getCurrentUser","get","logout","listJobs","params","getJob","id","createJob","video_url","cancelJob","getJobLogs","deleteJob","delete","listClips","getClip","getDownloadUrl","getThumbnailUrl","uploadClipToYouTube","clipId","options","deleteClip","getSettings","updateSettings","settings","put","listYouTubeAccounts","getYouTubeAuthUrl","redirectUri","redirect_uri","handleYouTubeCallback","code","state","deleteYouTubeAccount","api"],"sources":["/Users/yourystancato/youtube-viral-clipper/frontend/src/services/api.ts"],"sourcesContent":["import axios, { AxiosInstance } from 'axios';\nimport { AuthResponse, LoginCredentials, RegisterData, User, Job, Clip, Settings, YouTubeAccount } from '../types';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001';\n\nclass APIClient {\n  private client: AxiosInstance;\n\n  constructor() {\n    this.client = axios.create({\n      baseURL: `${API_URL}/api`,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    // Add auth token to requests\n    this.client.interceptors.request.use((config) => {\n      const token = localStorage.getItem('access_token');\n      if (token && config.headers) {\n        config.headers.Authorization = `Bearer ${token}`;\n      }\n      return config;\n    });\n\n    // Handle token refresh on 401\n    this.client.interceptors.response.use(\n      (response) => response,\n      async (error) => {\n        if (error.response?.status === 401) {\n          // Token expired, clear and redirect to login\n          localStorage.removeItem('access_token');\n          window.location.href = '/login';\n        }\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  // Auth endpoints\n  async register(data: RegisterData): Promise<AuthResponse> {\n    const response = await this.client.post<AuthResponse>('/auth/register', data);\n    return response.data;\n  }\n\n  async login(credentials: LoginCredentials): Promise<AuthResponse> {\n    const response = await this.client.post<AuthResponse>('/auth/login', credentials);\n    return response.data;\n  }\n\n  async getCurrentUser(): Promise<{ user: User }> {\n    const response = await this.client.get<{ user: User }>('/auth/me');\n    return response.data;\n  }\n\n  async logout(): Promise<void> {\n    await this.client.post('/auth/logout');\n  }\n\n  // Jobs endpoints\n  async listJobs(params?: { page?: number; per_page?: number; status?: string }): Promise<{\n    jobs: Job[];\n    total: number;\n    page: number;\n    per_page: number;\n    pages: number;\n  }> {\n    const response = await this.client.get('/jobs', { params });\n    return response.data;\n  }\n\n  async getJob(id: number): Promise<{ job: Job }> {\n    const response = await this.client.get(`/jobs/${id}`);\n    return response.data;\n  }\n\n  async createJob(video_url: string): Promise<{ message: string; job: Job }> {\n    const response = await this.client.post('/jobs', { video_url });\n    return response.data;\n  }\n\n  async cancelJob(id: number): Promise<{ message: string; job: Job }> {\n    const response = await this.client.post(`/jobs/${id}/cancel`);\n    return response.data;\n  }\n\n  async getJobLogs(id: number): Promise<{ job_id: number; status: string; error_message?: string; current_step?: string; progress: number; message: string }> {\n    const response = await this.client.get(`/jobs/${id}/logs`);\n    return response.data;\n  }\n\n  async deleteJob(id: number): Promise<{ message: string }> {\n    const response = await this.client.delete(`/jobs/${id}`);\n    return response.data;\n  }\n\n  // Clips endpoints\n  async listClips(params?: { page?: number; per_page?: number }): Promise<{\n    clips: Clip[];\n    total: number;\n    page: number;\n    per_page: number;\n    pages: number;\n  }> {\n    const response = await this.client.get('/clips', { params });\n    return response.data;\n  }\n\n  async getClip(id: number): Promise<{ clip: Clip }> {\n    const response = await this.client.get(`/clips/${id}`);\n    return response.data;\n  }\n\n  getDownloadUrl(id: number): string {\n    return `${API_URL}/api/clips/${id}/download`;\n  }\n\n  getThumbnailUrl(id: number): string {\n    return `${API_URL}/api/clips/${id}/thumbnail`;\n  }\n\n  async uploadClipToYouTube(\n    clipId: number,\n    options?: {\n      title?: string;\n      description?: string;\n      tags?: string[];\n      category?: string;\n      privacy?: string;\n      make_shorts?: boolean;\n    }\n  ): Promise<{ message: string; video_id?: string; video_url?: string; shorts_url?: string }> {\n    const response = await this.client.post(`/youtube/clips/${clipId}/upload`, options || {});\n    return response.data;\n  }\n\n  async deleteClip(id: number): Promise<{ message: string }> {\n    const response = await this.client.delete(`/clips/${id}`);\n    return response.data;\n  }\n\n  // Settings endpoints\n  async getSettings(): Promise<{ settings: Settings }> {\n    const response = await this.client.get('/settings');\n    return response.data;\n  }\n\n  async updateSettings(settings: Partial<Settings>): Promise<{ message: string; settings: Settings }> {\n    const response = await this.client.put('/settings', settings);\n    return response.data;\n  }\n\n  // YouTube accounts endpoints\n  async listYouTubeAccounts(): Promise<{ accounts: YouTubeAccount[] }> {\n    const response = await this.client.get('/youtube/accounts');\n    return response.data;\n  }\n\n  async getYouTubeAuthUrl(redirectUri?: string): Promise<{ authorization_url: string; state: string }> {\n    const params = redirectUri ? { redirect_uri: redirectUri } : {};\n    const response = await this.client.get('/youtube/auth/url', { params });\n    return response.data;\n  }\n\n  async handleYouTubeCallback(code: string, state: string, redirectUri?: string): Promise<{ message: string; account: YouTubeAccount }> {\n    const response = await this.client.post('/youtube/auth/callback', {\n      code,\n      state,\n      redirect_uri: redirectUri\n    });\n    return response.data;\n  }\n\n  async deleteYouTubeAccount(id: number): Promise<{ message: string }> {\n    const response = await this.client.delete(`/youtube/accounts/${id}`);\n    return response.data;\n  }\n}\n\nexport const api = new APIClient();\nexport default api;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}